<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Favicon -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="assets/img/favicon/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/img/favicon/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/img/favicon/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/img/favicon/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="assets/img/favicon/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="assets/img/favicon/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="assets/img/favicon/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="assets/img/favicon/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="assets/img/favicon/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="assets/img/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="assets/img/favicon/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="assets/img/favicon/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="assets/img/favicon/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="mstile-310x310.png" />

    <!-- Importaciones. Por favor nunca usen Bootstrap. -->
    <!-- Este archivo contiene los estilos de toda la app. Se utilizó SASS por lo que finalmente se generó un solo archivo con los estilos más compacto. -->
    <link rel="stylesheet" href="assets/css/main.min.css">
    <script src="assets/js/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <!-- Los tres archivos que hacen la función de base de datos. -->
    <script src="assets/js/staff.js" type="text/javascript"></script>
    <script src="assets/js/workshops.js" type="text/javascript"></script>
    <script src="assets/js/projects.js" type="text/javascript"></script>
    <script src="assets/js/form.js" type="text/javascript"></script>
    <script src="assets/js/welcome.js" type="text/javascript"></script>

    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-database.js"></script> 

    <title>Innovation Lab</title>
</head>
<!-- Estructura principal de la aplcicación. -->
<body>
    <span id="background" class="background">
    </span>
    <span class="title-container">
        <span class="inner-container">
            <span id="title-container" class="title-container no-select">
                <span class="title">
                    <img id="innovation-logo" class="innovation-logo" src="" alt="">
                </span>
                <span class="title-menu">
                	<a id="welcome-access" class="btn-menu">Bienvenida 2021</a>
                    <a id="home-access" class="btn-menu">Home</a>
                    <a id="staff-access" class="btn-menu">Staff</a>
                    <a id="projects-access" class="btn-menu">Projects</a>
                    <!-- <a id="presentations-access" class="btn-menu">Events</a> -->
                    <!-- <a id="sign-up-access" class="btn-menu">Sign up form</a> -->
                    <a id="workshops-access" class="btn-menu">Workshops</a>
                </span>
            </span>
        </span>
    </span>
    <!-- En esta sección se carga la información de los generateX() -->
    <span id="dynamic-information" class="dynamic-information">
        <span class="section-title">

        </span>
        <span class="section-body">
            
        </span>
    </span>
    <!-- En esta sección se carga la información de generateExpandedStaff(String name) -->
    <span id="dynamic-expanded-information" class="dynamic-expanded-information">
        <span class="section-body">
            
        </span>
        <!-- <span class="exit">
            <a id="exit-btn" class="exit-btn">
                <i class="fas fa-times"></i> Exit
            </a>
        </span> -->
    </span>
    <span id="copyright" class="copyright">© 2021 Innovation Lab, Universidad Galileo</span>
    <span id="galileo-logo" class="galileo-logo">
        <img src="assets/img/galileo-logo.png" alt="Universidad Galileo">
    </span>
    <span id="back-container" class="back-container">
        <a id="back" class="btn-back">
            <i class="fas fa-arrow-left"></i>
        </a>
    </span>
</body>
</html>

<!-- TODO: Modularizar el script en diferentes archivos. Sustituir jQuery por Javascript puro. -->
<script>
    /* Firebase para formularios */
    /*
    const config = {
        apiKey: "AIzaSyCUaR_CbMeqmSRmfniTOs4mNK4VjCJBUOw",
        authDomain: "formularios-innovation-lab.firebaseapp.com",
        databaseURL: "https://formularios-innovation-lab.firebaseio.com",
        projectId: "formularios-innovation-lab",
        storageBucket: "formularios-innovation-lab.appspot.com",
        messagingSenderId: "328644214050",
        appId: "1:328644214050:web:8532f345ced2e73338797b"
    };

    firebase.initializeApp(config);
    */

    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Agu', 'Sep', 'Oct', 'Nov', 'Dec'];
    var monthsSp = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];
    var inExpanded = false;
    var orderStaff = new Array();

    var lastElement = "";

    // En general todos los métodos generateX() generan una sección X en la aplicación.
    // generateHome() genera la sección de inicio con la información que se ve.
    function generateHome(){
        var element = $('#dynamic-information');
        element.find('.section-title').html('HOME');

        var html = '';
            html += '<span class="subtitle">';
            html += 'About the Innovation Lab';
            html += '</span>';
            html += '<p>';
            html += '"Nothing is a mistake. There\'s no win and no fail, there\'s only make." - Corita Kent';
            html += '</p>';
            html += '<p>';
            html += 'The Innovation Lab fosters a unique culture to cultivate curiosity and use creativity as a tool for the development of innovative technology projects. Through an environment characterized by teamwork, ensuring project success through experimentation of new ideas and the explicit permissibility of making mistakes and fail in order to achieve allow members to express themselves, learn, share and grow as a community.';
            html += '</p>';
            html += '<p>';
            html += 'The Lab is committed to see beyond the obvious, we are aware that more important than finding a single correct answer we need to consider all questions as we can imagine and explore different ideas. We like to use design thinking, build prototypes and make use of innovative technologies such as 3D printing, drones, computer vision and augmented reality (Leap Motion, Kinect, Google Glass, Oculus Rift), the Internet of Things (Arduino, Launchpad, BeagleBone Black and RaspberryPi) and bring these technologies together to our experiments. Build circuits, write code, develop software and do the necessary to make things work.';
            html += '</p>';
            html += '<p>';
            html += 'In the pursuit of innovation is also required a market and raise awareness in people that would be users of this technology that eventually will become products that people can receive and improve their lifestyle. Therefore, the Lab also has a commitment to promoting entrepreneurship and creating startups. The startups that the Lab supports work in the area of ​​technology because we believe that is the way to have a tangible and short-term change at all levels.';
            html += '</p>';
            html += '<span class="subtitle">';
            html += 'Why Innovation?';
            html += '</span>';
            html += '<p>In 2016, Guatemala is ranked 97th globally in terms of innovation, our score is 27.30/100. Both the global leader (Switzerland) and the Latin American leaders (Chile & Costa Rica) have won their seats by investing on research, technological development and education. For us, there is a great opportunity for improvement in the area of ​​innovation.</p>';
            html += '<p>Innovation requires novelty, can be a small change (sustained innovation) or a radical ( disruptive innovation) but either way, it will be something new. From my perspective this is achieved through the creativity that is nothing else that imagination put into practice. So to succeed in creating, we make use of innovation in assessing how to provide value and solve the right problems in a better way. We constantly look how to be agents of change and to connect ideas when doing technological development, that’s when we use innovation as our key tool in order that things can be implemented. That is why we decided to implement this effort as a laboratory rather than a department. For since the name suggests action implicit, that practical activities will be conducted and projects will be implemented.</p>';
        
        element.find('.section-body').html(html);
        
        element.css('opacity', '1');
        element.css('transform', 'translateY(0)');
        element.css('z-index', '1');
    }


    /* SIGN UP FORM START */
    // generateSignUp() genera el formulario de registro
    /*
    var formData = {};

    function generateSignUp(){

        var element = $('#dynamic-information');
        element.find('.section-title').html('SIGN UP');
        var html = '';

        form.forEach(element => {

            if (element.title != null) {
                html += '<span class="subtitle">' + element.title + '</span>';
            }
            if (element.description != null) {
                html += '<p>' + element.description + '</p>';
            }

            switch(element.type) {
                case 'formData':
                    break;
                case 'textbox':
                    // data
                    formData[element.id] = "text";

                    // html
                    html += '<input type="text" id="' + element.id + '" name="' + element.id + '"></input>';

                    break;
                case 'checkbox':
                    // data
                    check = {};

                    // html
                    var i = 0;
                    element.options.forEach(option => {
                        // id y name llevaran un correlativo para no repetirse
                        var str = element.id + i;

                        // data
                        // usar como llave el value, valor útil para quien recibe el formulario
                        check[option.value] = false;

                        // html
                        html += '<span class="singleOption">';
                        html += '<label for="' + str + '">';
                        html += '<input type="checkbox" id="' + str + '" name="' + str + '" value="' + option.value + '">';
                        html += '<span class="singleOptionSpacer"></span>';
                        html += option.display + '</label>';
                        html += '</span>';
                        i++;
                    });

                    // data
                    formData[element.id] = check;

                    break;
                case 'radio':
                    // data
                    formData[element.id] = "radio";

                    // html
                    var i = 0;
                    element.options.forEach(option => {
                        // todas las opciones del radio necesitan el mismo nombre
                        var name = element.id;
                        // id correlativo para no repetirse
                        var id = element.id + i;

                        html += '<span class="singleOption">';
                        html += '<label for"' + id + '">';
                        html += '<input type="radio" id="' + id + '" name="' + name + '" value="' + option.value + '">';
                        html += '<span class="singleOptionSpacer"></span>';
                        html += option.display + '</label>';
                        html += '</span>';
                        i++;
                    });

                    break;
            }
        });

        html += '<p><a id="send-form" class="btn-menu" onclick="submitForm()">Enviar datos</a></p>';

        element.find('.section-body').html(html);

        element.css('opacity', '1');
        element.css('transform', 'translateY(0)');
        element.css('z-index', '1');
    }
    */

    /* find me */
    /*
    function submitForm () {
        Object.keys(formData).forEach(nombre => {
            if (formData[nombre] == "text") {
                formData[nombre] = $('[name="' + nombre + '"]').val();
            } else if (formData[nombre] == "radio") {
                formData[nombre] = $('[name="' + nombre + '"]:checked').val();
            } else {
                var i = 0;
                Object.keys(formData[nombre]).forEach(elem => {
                    formData[nombre][elem] = $('[name="' + nombre + i + '"]').prop("checked");
                    i++;
                });
            }
        });

        //console.log(formData);
        storeData(formData);
    }

    // Almacenar datos en Firebase
    function storeData (data) {
        data.timestamp = firebase.database.ServerValue.TIMESTAMP;

        var ref = firebase.database().ref('submits/').push(data, function (err) {
            if (err) {
                console.warn(err);
            } else {
                alert("Se han guardado tus datos con éxito.");
            }
        });
    }
    */
    /* SIGN UP END */



    //generateProjects() genera la sección de proyectos. 
    // Aquí definí las etiquetas que pueden estar en el archivo projects.js.
    function generateProjects(){
        var correlative = 0;
        var element = $('#dynamic-information');
        element.find('.section-title').html('PROJECTS');
        var html = '';
        html += '<span class="projects-container">';
        projects.forEach(element => {
            html += `<span id="${correlative}" class="project-card">`;
            html += `<img src="assets/img/${element.thumbnail}">`;
            html += '<span class="project-info-container">';
            html += '<span class="project-name">';
            html += element.name;
            html += '</span>';
            html += '<span class="project-date">';
            html += months[element.month - 1] + ' ' + element.year
            html += '</span>';
            html += '<p class="project-introduction">';
            html += element.introduction;
            html += '</p>';
            html += '</span>';
            html += '<a class="btn-back">';
            html += '<i class="fas fa-arrow-up"></i>';
            html += '</a>';
            html += '</span>';
            correlative++;
        });
        html += '</span>';
        html += `<span id="project-information" class="project-information">`;
        html += '</span>';
        element.find('.section-body').html(html);

        // Esto es lo que pasa cuando se le da click a una tarjeta de proyecto.
        $('.project-card').click((event)=>{
            element = $(event.currentTarget);
            // aaaa
            if(element.hasClass('expanded')){
                element.removeClass('expanded');
                element.parent().removeClass('expanded');
                $('#background').removeClass('unfocused');
                element.find('.btn-back').html('<i class="fas fa-arrow-up"></i>');
                $('#project-information').removeClass('expanded');
            }else{
                element.addClass('expanded');
                element.parent().addClass('expanded');
                $('#background').addClass('unfocused');
                element.find('.btn-back').html('<i class="fas fa-plus"></i>');

                html = '';
                var project = projects[element.attr('id')];

                html += '<span class="project-summary">';
                html += project.summary;
                html += '</span>';
                html += '<p class="project-status">';
                html += '<i class="fas fa-circle"></i>';
                html += project.status;
                html += '</p>';
                if(typeof(project.video) !== 'undefined'){
                    html += '<span id="youtube-video" class="youtube-video">';
                    html += project.video;
                    html += '</span>';
                }
                (project.description).forEach((desc)=>{
                    html += '<p>';
                    html += desc;
                    html += '</p>';
                });
                
                $('#project-information').html(html);
                if(typeof(project.video) !== 'undefined'){
                    var video = $('#youtube-video').find('iframe');
                    video.on('load',()=>{
                        video.addClass('expanded');
                    });
                }
                $('#project-information').addClass('expanded');
            }
        });

        element.css('opacity', '1');
        element.css('transform', 'translateY(0)');
        element.css('z-index', '1');
    }



    function generateWelcome(){
        var correlative = 0;
        var element = $('#dynamic-information');
        element.find('.section-title').html('¡Bienvenidos Promoción 2021!');
        var html = '';
        html += '<span class="welcome-container">';
        welcomeEntries.forEach(element => {
        	if (correlative == 0) {
        		html += '<div class="welcome-subtitle">Educación</div>';
        		html += '<div class="welcome-spacer"></div>';
        	}
        	if (correlative == 3) {
        		html += '<div class="welcome-spacer"></div>';
        		html += '<div class="welcome-subtitle">Proyectos</div>';
        		html += '<div class="welcome-spacer"></div>';
        	}
            html += `<span id="${correlative}" class="welcome-card">`;
	            html += `<img src="${element.thumbnail}">`;
	            html += '<span class="welcome-info-container">';
		            html += '<span class="welcome-name">';
		            	html += element.name;
		            html += '</span>';
		            html += '<span class="welcome-date">';
		            	html += monthsSp[element.month - 1] + ' ' + element.year
		            html += '</span>';
		            html += '<p class="welcome-introduction">';
		            html += element.introduction;
		            html += '</p>';
	            html += '</span>';
	            html += '<a class="btn-back">';
	            html += '<i class="fas fa-arrow-up"></i>';
	            html += '</a>';
            html += '</span>';
            correlative++;
        });
        html += '</span>';
        html += `<span id="welcome-information" class="welcome-information">`;
        html += '</span>';
        element.find('.section-body').html(html);

        // Esto es lo que pasa cuando se le da click a una tarjeta de proyecto.
        $('.welcome-card').click((event)=>{
            element = $(event.currentTarget);

            lastElement = element;
            // aaaa
            if(element.hasClass('expanded')){
                element.removeClass('expanded');
                element.parent().removeClass('expanded');
                $('#background').removeClass('unfocused');
                element.find('.btn-back').html('<i class="fas fa-arrow-up"></i>');
                $('#welcome-information').removeClass('expanded');
            }else{
                element.addClass('expanded');
                element.parent().addClass('expanded');
                $('#background').addClass('unfocused');
                element.find('.btn-back').html('<i class="fas fa-plus"></i>');

                html = '';
                var entry = welcomeEntries[element.attr('id')];

                html += '<span class="entry-summary">';
                html += entry.summary;
                html += '</span>';

                if(typeof(entry.video) !== 'undefined'){
                    html += '<span id="youtube-video" class="youtube-video">';
                    html += entry.video;
                    html += '</span>';
                }
                (entry.description).forEach((desc)=>{
                    html += '<p>';
                    html += desc;
                    html += '</p>';
                });
                
                (entry.images).forEach((imgsrc)=>{
                	//html += '<p>';
                	html += `<div class="wimg"><img src="${imgsrc}"></div>`;
                	//html += '</p>';
                })

                $('#welcome-information').html(html);
                if(typeof(entry.video) !== 'undefined'){
                    var video = $('#youtube-video').find('iframe');
                    video.on('load',()=>{
                        video.addClass('expanded');
                    });
                }
                $('#welcome-information').addClass('expanded');
            }
        });

        element.css('opacity', '1');
        element.css('transform', 'translateY(0)');
        element.css('z-index', '1');
    }




    //generateWorkshops() genera la sección de talleres. 
    // Aquí definí las etiquetas que pueden estar en el archivo workshops.js.
    function generateWorkshops(){
        var correlative = 0;
        var element = $('#dynamic-information');
        element.find('.section-title').html('WORKSHOPS');
        var html = '';
        html += '<span class="workshops-container">';
        workshops.forEach(element => {
            html += `<span id="${correlative}" class="workshop-card">`;
            html += `<img src="assets/img/${element.image}">`;
            html += '<span class="workshop-info-container">';
            html += '<span class="workshop-name">';
            html += element.name;
            html += '</span>';
            html += '<span class="workshop-introduction">';
            html += element.introduction;
            html += '</span>';
            html += '</span>';
            html += '<a class="btn-back">';
            html += '<i class="fas fa-arrow-up"></i>';
            html += '</a>';
            html += '<span class="workshop-duration"><i class="far fa-clock"></i>';
            html += element.duration;
            html += '</span>';
            html += '</span>';
            correlative++;
        });
        html += `<span id="workshop-information" class="workshop-information">`;
        html += '<p>';
        html += '</p>';
        html += '</span>';
        html += '</span>';
        element.find('.section-body').html(html);

        // Esto es lo que pasa cuando se le da click a una tarjeta de taller.
        $('.workshop-card').click((event)=>{
            element = event.currentTarget;
            if($(element).hasClass('expanded')){
                $(element).removeClass('expanded');
                $('#background').removeClass('unfocused');
                $('.workshop-card').each((index, workshop)=>{
                    if(workshop.id != element.id){
                        var actualWorkshop = $('#' + workshop.id);
                        actualWorkshop.css('height', '150px');
                        actualWorkshop.css('margin', '7.5px 15px');
                    }else{
                        var actualWorkshop = $('#' + workshop.id);
                        actualWorkshop.find('.btn-back').html('<i class="fas fa-arrow-up"></i>');
                    }
                });
                $('#workshop-information').removeClass('expanded');
            }else{
                $(element).addClass('expanded');
                $('#background').addClass('unfocused');
                $('.workshop-card').each((index, workshop)=>{
                    if(workshop.id != element.id){
                        var actualWorkshop = $('#' + workshop.id);
                        actualWorkshop.css('height', '0');
                        actualWorkshop.css('margin', '0 15px');
                    }else{
                        var actualWorkshop = $('#' + workshop.id);
                        actualWorkshop.find('.btn-back').html('<i class="fas fa-plus"></i>');
                    }
                });
                html = '';
                workshops[element.id].information.forEach((element)=>{
                    html += '<p>';
                    html += element;
                    html += '</p>';
                });
                html += '<p>';
                html += '<i class="fas fa-tools"></i>';
                html += workshops[element.id].tools;
                html += '</p>';
                html += '<p>';
                html += '<i class="far fa-envelope"></i>';

                // Buscando el encargado para mostrar su información. 
                // TODO: Conectar este elemento con la sección expandida de staff. Mejorar el rendimiento de la búsqueda, tal vez con map.
                var findedStaff;
                staff.forEach((staffMember)=>{
                    if(staffMember.name == workshops[element.id].contact){
                        html += staffMember.email;
                        findedStaff = staffMember;
                    }
                });
                html += '</p>';
                html += '<span class="staff">';
                html += '<span class="staff-image">';
                html += `<img src="assets/img/${findedStaff.image}">`;
                html += '</span>';
                html += '<span class="staff-name">';
                html += findedStaff.name;
                html += '</span>';
                html += '</span>';
                $('#workshop-information').html(html);
                $('#workshop-information').addClass('expanded');
            }

            window.scroll({
                top: 0, 
                left: 0, 
                behavior: 'smooth'
            });
        });

        element.css('opacity', '1');
        element.css('transform', 'translateY(0)');
        element.css('z-index', '1');
    }

    // generateExpandedStaff(String name) genera la sección de staff expandido. 
    // Esto quiere decir que muestra la información del staff seleccionado con nombre "name".
    function generateExpandedStaff(name){
        inExpanded = true;

        var findedStaff;
        staff.forEach((staffMember)=>{
            if(staffMember.name == name){
                findedStaff = staffMember;
            }
        });

        var element = $('#dynamic-expanded-information');
        var html = '';

        html += `<span class="staff-expanded-card ${findedStaff.job}">`;
        html += '<span class="staff-image">';
        html += `<img class="img" img-path="assets/img/${findedStaff.image}" src=""">`;

        html += '</span>';

        html += '<span class="staff-name">';
        html += name;
        html += '</span>';
        html += '<span class="staff-company">';
        switch(findedStaff.job){
            case 'boss':{
                html += 'Team\'s Leader';
            }break;
            case 'projects-leader':{
                html += 'Projects Leader';
            }break;
            case 'workshops-leader':{
                html += 'Workshops Leader';
            }break;
            case 'projects-assistant':{
                html += 'Projects Assistant';
            }break;
            case 'workshops-assistant':{
                html += 'Workshops Assistant';
            }break;
            case 'graphic-designer':{
                html += 'Graphic Designer';
            }break;
        }
        html += '</span>';
        html += `<span class="staff-information">${findedStaff.information}</span>`;

        html += '</span>';

        html += '</span>';

        element.find('.section-body').html(html);

        var actualImg = element.find('.section-body').find('.staff-expanded-card').find('.staff-image');

        if(actualImg.find('.img')[0] != undefined) actualImg.find('.img')[0].onload = () => {
            actualImg.css('opacity', '1');
            actualImg.css('transform', 'scale(1)');
        }

        actualImg.find('.img').attr('src', actualImg.find('.img').attr('img-path'));

        
        $('#dynamic-information').css('opacity', '0');
        $('#dynamic-expanded-information').css('width', '100vw');
        $('#dynamic-expanded-information').css('height', '100vh');
        $('#dynamic-expanded-information').css('opacity', '1');
    }

    // hideExpanded() se llama al darle click a la flecha en la esquina inferior izquierda y la sección staff expanded está abierta.
    function hideExpanded(){
        inExpanded = false;
        $('#dynamic-information').css('opacity', '1');
        setTimeout(()=>{
            $('#dynamic-expanded-information').find('.section-body').html('');
            $('#dynamic-expanded-information').css('height', 'auto');
        }, 300);
        $('#dynamic-expanded-information').css('opacity', '0');
        
    }

    // getSecondName(String name) es la función utilizada para ordenar la sección de staff. 
    // Si se quiere ordenar por nombre en vez de apellido solo hay que cambiar el 1 por el 0.
    function getSecondName(name){
        return name.split(" ")[1];
    }

    // generateStaff() genera la sección de staff. Ordena los registros por apellido. 
    // El ordenamiento se hace al cargar la página por primera vez. 
    function generateStaff(){
        var element = $('#dynamic-information');
        element.find('.section-title').html('STAFF');
        var html = '';
        html += '<span class="staff-container">';
        // html += '<p class="helper">Para ver más información sobre el staff presiona sobre su imagen.</p>'
        orderStaff.forEach(element => {
            html += `<span class="staff-card ${element.job}">`;
            html += '<span class="staff-image">';
            html += (element.gif == null)? `<img class="img" img-path="assets/img/${element.image}" src="">` : `<img class="img" img-path="${element.gif}" src="">`;
            html += '<span class="staff-see-more">';
            html += 'See more'
            html += '</span>';
            html += '</span>';
            html += '<span class="staff-name-container">'
            html += `<span class="staff-emoji">`;
            html += element.emoji;
            html += '</span>';
            html += `<span class="staff-name">`;
            html += element.name;
            html += '</span>';
            html += '</span>';
            html += '<span class="staff-job">';
            switch(element.job){
                case 'boss':{
                    html += 'Team\'s Leader';
                }break;
                case 'projects-leader':{
                    html += 'Projects Leader';
                }break;
                case 'workshops-leader':{
                    html += 'Workshops Leader';
                }break;
                case 'projects-assistant':{
                    html += 'Projects Assistant';
                }break;
                case 'workshops-assistant':{
                    html += 'Workshops Assistant';
                }break;
                case 'graphic-designer':{
                    html += 'Graphic Designer';
                }break;
            }
            html += '</span>';
            html += '<span class="staff-information">';
            html += '<p>';
            html += element.information;
            html += '</p>';
            html += '</span>';
            html += '</span>';
        });
        html += '</span>';
        element.find('.section-body').html(html);

        element.find('.section-body').find('.staff-container').find('.staff-card').each((index, element) => {
            var actualImg = $(element).find('.staff-image');

            if(actualImg.find('.img')[0] != undefined) actualImg.find('.img')[0].onload = () => {
                actualImg.css('opacity', '1');
                actualImg.css('transform', 'scale(1)');
            }

            actualImg.find('.img').attr('src', actualImg.find('.img').attr('img-path'));
        });

        element.css('opacity', '1');
        element.css('transform', 'translateY(0)');
        element.css('z-index', '1');

        //Esto es lo que sucede cuando se le da click a la imagen de la carta del staff.
        $('.staff-image').click((event)=>{
            element = $(event.currentTarget);
            var image_path = element.find('.img').attr('src');
            var name = element.parent().find('.staff-name').text();
            var gde = element.find('.gde-banner');
            generateExpandedStaff(name);
        });
    }

    // hideIndex() es llamada al darle click a una sección del index para esconderlo.
    function hideIndex(){
        $('#copyright').css('bottom', '-23px');
        $('#galileo-logo').css('bottom', '-118px');
        $('#title-container').css('opacity', '0');
        $('#title-container').css('transform', 'translateY(20px)');
        $('#back-container').find('.btn-back').css('transform', 'translateX(0)');
        $('body').css('overflow-y', 'auto');
        $('#title-container').css('z-index', '-1');

        window.scroll({
            top: 0, 
            left: 0, 
            behavior: 'smooth'
        });
    }

    // showIndex() es llamdo al darle clicl a la flecha de la esquina inferior izquierda cuando no está abierto el staff expandido.
    function showIndex(){
        $('#copyright').css('bottom', '130px');
        $('#galileo-logo').css('bottom', '0');
        var element = $('#title-container');
        element.css('opacity', '1');
        element.css('transform', 'translateY(0)');
        $('#back-container').find('.btn-back').css('transform', 'translateX(-85px)');
        element = $('#dynamic-information');
        element.css('opacity', '0');
        element.css('transform', 'translateY(-40px)');
        element.css('z-index', 0);
        $('body').css('overflow-y', 'hidden');
        $('#title-container').css('z-index', '1');
        $('#background').removeClass('unfocused');
        setTimeout(()=>{
            element.find('.section-body').html('');
        },400);
    }

    // Esto es para cambiar de logo dependiendo de si se está en teléfono o en computadora.
    $(window).resize(()=>{
        if($(window).width() > 750){
            $('#innovation-logo').attr('src','assets/img/logo3.png');
        }else{
            $('#innovation-logo').attr('src','assets/img/logo.png');
        }
    });

    $(document).ready(()=>{
        $('.background').css('opacity', '1');
        $('.background').css('transform', 'scale(1.2)');

        // Ordenando el staff por el valor que devuelva getSecondName(String name). 
        // El resultado se almacena en orderStaff.
        var inserted = false;
        staff.forEach((element, index) => {
            inserted = false;
            if(orderStaff.length == 0){
                orderStaff.unshift(element);
            }else{
                orderStaff.forEach((actualElement, actualIndex) => {
                    if(!inserted){
                        var comp = getSecondName(element.name).localeCompare(getSecondName(actualElement.name), 'en', {sensitivity: 'base'});
                        if(comp > 0){
                            orderStaff.splice(actualIndex, 0, element);
                            inserted = true;
                        }
                    }
                });
                if(!inserted){
                    orderStaff.push(element);
                }
            }
        });

        $('#innovation-logo')[0].onload = ()=>{
            $('#innovation-logo').css('opacity', '1');
        };

        if($(window).width() > 750){
            $('#innovation-logo').attr('src','assets/img/logo3.png');
        }else{
            $('#innovation-logo').attr('src','assets/img/logo.png');
        }

        // Esto es para pasar hash en la url y que abra la sección directamente. 
        // Ej. http://innovacion.galileo.edu/#staff
        if(window.location.hash) {
            var hash = window.location.hash.substring(1);
            if(hash == 'staff'){
                hideIndex();
                generateStaff();
            } else if (hash == 'welcome') {
            	hideIndex();
            	generateWelcome();
            }
        }

        // Acciones al darle click a un botón del index. Cada uno abre una sección. 
        // Tomar en cuenta que la página es dinámica, únicamente se abre index.html.
        $('.btn-menu').click((event)=>{
            hideIndex();

            var element = event.target;
            switch(element.id){
            	case 'welcome-access':{
            		generateWelcome();
            	}break;
                case 'home-access':{
                    generateHome();
                }break;
                case 'staff-access':{
                    generateStaff();
                }break;
                case 'projects-access':{
                    generateProjects();
                }break;
                case 'presentations-access':{
                    console.log('hola');
                }break;
                case 'sign-up-access':{
                    generateSignUp();
                }break;
                case 'workshops-access':{
                    generateWorkshops();
                }break;
            }
        });

        // Esto es llamado al darle click a la flecha de la esquina inferior izquierda.
        $('#back').click(()=>{
        	if (lastElement != "") {
        		element = lastElement;
        		if(element.hasClass('expanded')){
	                element.removeClass('expanded');
	                element.parent().removeClass('expanded');
	                $('#background').removeClass('unfocused');
	                element.find('.btn-back').html('<i class="fas fa-arrow-up"></i>');
	                $('#welcome-information').removeClass('expanded');
	            }
	            lastElement = "";
        		return;
        	}


            if(inExpanded) hideExpanded();
            else showIndex();
        });
    });
</script>
